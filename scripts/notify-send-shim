#!/bin/bash
# Wrapper that silently drops notify-send calls from Voxtype.
# All other callers pass through to the real notify-send.
# Only matches --app-name=Voxtype (exact flag), not arbitrary args.
prev=""
for arg in "$@"; do
    if [[ "$arg" == "--app-name=Voxtype" ]]; then
        exit 0
    fi
    if [[ "$prev" == "--app-name" && "$arg" == "Voxtype" ]]; then
        exit 0
    fi
    prev="$arg"
done
# Find the real notify-send by excluding the shim directory from PATH
shim_dir="$(cd -- "$(dirname -- "${BASH_SOURCE[0]}")" && pwd)"
real_notify=""
IFS=: read -ra dirs <<< "$PATH"
for d in "${dirs[@]}"; do
    [ "$d" = "$shim_dir" ] && continue
    if [ -x "$d/notify-send" ]; then
        real_notify="$d/notify-send"
        break
    fi
done
if [ -n "$real_notify" ]; then
    exec "$real_notify" "$@"
fi
